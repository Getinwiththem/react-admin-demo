{"version":3,"sources":["../../data-generator/lib/index.js","../../data-generator/lib/customers.js","../../data-generator/lib/categories.js","../../data-generator/lib/products.js","../../data-generator/lib/commands.js","../../data-generator/lib/invoices.js","../../data-generator/lib/reviews.js","../../data-generator/lib/finalize.js","fakeServer/graphql.js","../../data-generator/lib/utils.js"],"names":["__importDefault","this","mod","__esModule","default","Object","defineProperty","exports","value","customers_1","__webpack_require__","categories_1","products_1","commands_1","invoices_1","reviews_1","finalize_1","options","serializeDate","db","customers","categories","products","commands","invoices","reviews","en_1","utils_1","_a","Array","from","keys","map","id","first_seen","randomDate","last_seen","has_ordered","weightedBoolean","first_name","name","firstName","last_name","lastName","email","internet","birthday","date","past","address","streetName","zipcode","zipCode","city","avatar","toISOString","latest_purchase","has_newsletter","groups","nb_commands","total_spent","reduce","acc","category","concat","index","width","randomFloat","height","category_id","reference","substr","random","alphaNumeric","arrayElement","price","thumbnail","image","description","lorem","paragraph","stock","number","min","max","is_after_1","sub_days_1","today","Date","aMonthAgo","nbProducts","weightedArrayElement","basket","product_id","quantity","total_ex_taxes","total","product","delivery_fees","tax_rate","taxes","parseFloat","toFixed","customer","filter","status","boolean","toUpperCase","customer_id","returned","command","sort","a","b","command_id","reviewers","indexOf","rating","comment","apply","sentences","join","forEach","customersBySpending","length","push","review","settings","configuration","url","mail","sender","transport","service","auth","user","pass","file_type_whiltelist","r","__webpack_exports__","json_graphql_server__WEBPACK_IMPORTED_MODULE_0__","json_graphql_server__WEBPACK_IMPORTED_MODULE_0___default","n","data_generator__WEBPACK_IMPORTED_MODULE_1__","data_generator__WEBPACK_IMPORTED_MODULE_1___default","fetch_mock__WEBPACK_IMPORTED_MODULE_2__","fetch_mock__WEBPACK_IMPORTED_MODULE_2___default","data","generateData","handler","JsonGraphqlServer","getHandler","fetchMock","mock","restore","values","weights","fill","likelyhood","minDate","maxDate","minTs","getTime","now","range","randomRange","ts","Math","sqrt","precision"],"mappings":"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","file":"static/js/6.75e69c16.chunk.js","sourcesContent":["\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar customers_1 = __importDefault(require(\"./customers\"));\n\nvar categories_1 = __importDefault(require(\"./categories\"));\n\nvar products_1 = __importDefault(require(\"./products\"));\n\nvar commands_1 = __importDefault(require(\"./commands\"));\n\nvar invoices_1 = __importDefault(require(\"./invoices\"));\n\nvar reviews_1 = __importDefault(require(\"./reviews\"));\n\nvar finalize_1 = __importDefault(require(\"./finalize\"));\n\nexports.default = function (options) {\n  if (options === void 0) {\n    options = {\n      serializeDate: true\n    };\n  }\n\n  var db = {};\n  db.customers = customers_1.default(db, options);\n  db.categories = categories_1.default(db, options);\n  db.products = products_1.default(db, options);\n  db.commands = commands_1.default(db, options);\n  db.invoices = invoices_1.default(db, options);\n  db.reviews = reviews_1.default(db, options);\n  finalize_1.default(db);\n  return db;\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar en_1 = require(\"faker/locale/en\");\n\nvar utils_1 = require(\"./utils\");\n\nexports.default = function (db, _a) {\n  var serializeDate = _a.serializeDate;\n  return Array.from(Array(900).keys()).map(function (id) {\n    var first_seen = utils_1.randomDate();\n    var last_seen = utils_1.randomDate(first_seen);\n    var has_ordered = utils_1.weightedBoolean(25);\n    var first_name = en_1.name.firstName();\n    var last_name = en_1.name.lastName();\n    var email = en_1.internet.email(first_name, last_name);\n    var birthday = has_ordered ? en_1.date.past(60) : null;\n    return {\n      id: id,\n      first_name: first_name,\n      last_name: last_name,\n      email: email,\n      address: has_ordered ? en_1.address.streetName() : null,\n      zipcode: has_ordered ? en_1.address.zipCode() : null,\n      city: has_ordered ? en_1.address.city() : null,\n      avatar: en_1.internet.avatar(),\n      birthday: serializeDate && birthday ? birthday.toISOString() : birthday,\n      first_seen: serializeDate ? first_seen.toISOString() : first_seen,\n      last_seen: serializeDate ? last_seen.toISOString() : last_seen,\n      has_ordered: has_ordered,\n      latest_purchase: null,\n      has_newsletter: has_ordered ? utils_1.weightedBoolean(30) : true,\n      groups: [],\n      nb_commands: 0,\n      total_spent: 0\n    };\n  });\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function () {\n  return [{\n    id: 0,\n    name: 'animals'\n  }, {\n    id: 1,\n    name: 'beard'\n  }, {\n    id: 2,\n    name: 'business'\n  }, {\n    id: 3,\n    name: 'cars'\n  }, {\n    id: 4,\n    name: 'city'\n  }, {\n    id: 5,\n    name: 'flowers'\n  }, {\n    id: 6,\n    name: 'food'\n  }, {\n    id: 7,\n    name: 'nature'\n  }, {\n    id: 8,\n    name: 'people'\n  }, {\n    id: 9,\n    name: 'sports'\n  }, {\n    id: 10,\n    name: 'tech'\n  }, {\n    id: 11,\n    name: 'travel'\n  }, {\n    id: 12,\n    name: 'water'\n  }];\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar en_1 = require(\"faker/locale/en\");\n\nvar utils_1 = require(\"./utils\");\n\nexports.default = function (db) {\n  var id = 0;\n  return db.categories.reduce(function (acc, category) {\n    return acc.concat(Array.from(Array(10).keys()).map(function (index) {\n      var width = utils_1.randomFloat(10, 40);\n      var height = utils_1.randomFloat(10, 40);\n      return {\n        id: id++,\n        category_id: category.id,\n        reference: category.name.substr(0, 2) + '-' + en_1.random.alphaNumeric(5) + '-' + en_1.random.arrayElement('ABCDEFGHIJKLMNOPQRSTUVWXYZ'),\n        width: width,\n        height: height,\n        price: utils_1.randomFloat(width * height / 20, width * height / 15),\n        thumbnail: 'https://marmelab.com/posters/' + category.name + '-' + (index + 1) + '.jpeg',\n        image: 'https://marmelab.com/posters/' + category.name + '-' + (index + 1) + '.jpeg',\n        description: en_1.lorem.paragraph(),\n        stock: utils_1.weightedBoolean(20) ? 0 : en_1.random.number({\n          min: 0,\n          max: 250\n        })\n      };\n    }));\n  }, []);\n};","\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar en_1 = require(\"faker/locale/en\");\n\nvar is_after_1 = __importDefault(require(\"date-fns/is_after\"));\n\nvar sub_days_1 = __importDefault(require(\"date-fns/sub_days\"));\n\nvar utils_1 = require(\"./utils\");\n\nexports.default = function (db, _a) {\n  var serializeDate = _a.serializeDate;\n  var today = new Date();\n  var aMonthAgo = sub_days_1.default(today, 30);\n  return Array.from(Array(600).keys()).map(function (id) {\n    var nbProducts = utils_1.weightedArrayElement([1, 2, 3, 4, 5, 6, 7, 8, 9, 10], [30, 20, 5, 2, 1, 1, 1, 1, 1, 1]);\n    var basket = Array.from(Array(nbProducts).keys()).map(function () {\n      return {\n        product_id: en_1.random.number({\n          min: 0,\n          max: 10 * 13 - 1\n        }),\n        quantity: utils_1.weightedArrayElement([1, 2, 3, 4, 5], [10, 5, 3, 2, 1])\n      };\n    });\n    var total_ex_taxes = basket.reduce(function (total, product) {\n      return total + db.products[product.product_id].price * product.quantity;\n    }, 0);\n    var delivery_fees = utils_1.randomFloat(3, 8);\n    var tax_rate = en_1.random.arrayElement([0.12, 0.17, 0.2]);\n    var taxes = parseFloat(((total_ex_taxes + delivery_fees) * tax_rate).toFixed(2));\n    var customer = en_1.random.arrayElement(db.customers.filter(function (customer) {\n      return customer.has_ordered;\n    }));\n    var date = utils_1.randomDate(customer.first_seen, customer.last_seen);\n    var status = is_after_1.default(date, aMonthAgo) && en_1.random.boolean() ? 'ordered' : utils_1.weightedArrayElement(['delivered', 'cancelled'], [10, 1]);\n    return {\n      id: id,\n      reference: en_1.random.alphaNumeric(6).toUpperCase(),\n      date: serializeDate ? date.toISOString() : date,\n      customer_id: customer.id,\n      basket: basket,\n      total_ex_taxes: total_ex_taxes,\n      delivery_fees: delivery_fees,\n      tax_rate: tax_rate,\n      taxes: taxes,\n      total: parseFloat((total_ex_taxes + delivery_fees + taxes).toFixed(2)),\n      status: status,\n      returned: status == 'delivered' ? utils_1.weightedBoolean(10) : false\n    };\n  });\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (db, _a) {\n  var serializeDate = _a.serializeDate;\n  var id = 0;\n  return db.commands.filter(function (command) {\n    return command.status !== 'delivered';\n  }).sort(function (a, b) {\n    return new Date(a.date) - new Date(b.date);\n  }).map(function (command) {\n    return {\n      id: id++,\n      date: command.date,\n      command_id: command.id,\n      customer_id: command.customer_id,\n      total_ex_taxes: command.total_ex_taxes,\n      delivery_fees: command.delivery_fees,\n      tax_rate: command.tax_rate,\n      taxes: command.taxes,\n      total: command.total\n    };\n  });\n};","\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar en_1 = require(\"faker/locale/en\");\n\nvar sub_days_1 = __importDefault(require(\"date-fns/sub_days\"));\n\nvar is_after_1 = __importDefault(require(\"date-fns/is_after\"));\n\nvar utils_1 = require(\"./utils\");\n\nexports.default = function (db, _a) {\n  var serializeDate = _a.serializeDate;\n  var today = new Date();\n  var aMonthAgo = sub_days_1.default(today, 30);\n  var id = 0;\n  var reviewers = db.customers.filter(function (customer) {\n    return customer.has_ordered;\n  }).filter(function () {\n    return utils_1.weightedBoolean(60);\n  }) // only 60% of buyers write reviews\n  .map(function (customer) {\n    return customer.id;\n  });\n  return db.commands.filter(function (command) {\n    return reviewers.indexOf(command.customer_id) !== -1;\n  }).reduce(function (acc, command) {\n    return acc.concat(command.basket.filter(function () {\n      return utils_1.weightedBoolean(40);\n    }) // reviewers review 40% of their products\n    .map(function (product) {\n      var date = utils_1.randomDate(command.date);\n      var status = is_after_1.default(aMonthAgo, date) ? utils_1.weightedArrayElement(['accepted', 'rejected'], [3, 1]) : utils_1.weightedArrayElement(['pending', 'accepted', 'rejected'], [5, 3, 1]);\n      return {\n        id: id++,\n        date: serializeDate ? date.toISOString() : date,\n        status: status,\n        command_id: command.id,\n        product_id: product.product_id,\n        customer_id: command.customer_id,\n        rating: en_1.random.number({\n          min: 1,\n          max: 5\n        }),\n        comment: Array.apply(null, Array(en_1.random.number({\n          min: 1,\n          max: 5\n        }))).map(function () {\n          return en_1.lorem.sentences();\n        }).join('\\n \\r')\n      };\n    }));\n  }, []);\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar utils_1 = require(\"./utils\");\n\nfunction default_1(db) {\n  // set latest purchase date\n  db.commands.forEach(function (command) {\n    var customer = db.customers[command.customer_id];\n\n    if (!customer.latest_purchase || customer.latest_purchase < command.date) {\n      customer.latest_purchase = command.date;\n    }\n\n    customer.total_spent += command.total;\n    customer.nb_commands++;\n  }); // add 'collector' group\n\n  var customersBySpending = db.commands.reduce(function (customers, command) {\n    if (!customers[command.customer_id]) {\n      customers[command.customer_id] = {\n        nbProducts: 0\n      };\n    }\n\n    customers[command.customer_id].nbProducts += command.basket.length;\n    return customers;\n  }, {});\n  Object.keys(customersBySpending).map(function (customer_id) {\n    if (customersBySpending[customer_id].nbProducts > 10) {\n      db.customers[customer_id].groups.push('collector');\n    }\n  }); // add 'ordered_once' group\n\n  db.customers.filter(function (customer) {\n    return customer.nb_commands == 1;\n  }).forEach(function (customer) {\n    return customer.groups.push('ordered_once');\n  }); // add 'compulsive' group\n\n  db.customers.filter(function (customer) {\n    return customer.total_spent > 1500;\n  }).forEach(function (customer) {\n    return customer.groups.push('compulsive');\n  }); // add 'regular' group\n\n  db.customers.filter(function () {\n    return utils_1.weightedBoolean(20);\n  }).forEach(function (customer) {\n    return customer.groups.push('regular');\n  }); // add 'returns' group\n\n  db.commands.filter(function (command) {\n    return command.returned;\n  }).forEach(function (command) {\n    if (db.customers[command.customer_id].groups.indexOf('returns') === -1) {\n      db.customers[command.customer_id].groups.push('returns');\n    }\n  }); // add 'reviewer' group\n\n  db.reviews.forEach(function (review) {\n    var customer = db.customers[review.customer_id];\n\n    if (customer.groups.indexOf('reviewer') === -1) {\n      customer.groups.push('reviewer');\n    }\n  }); // add settings\n\n  db.settings = [{\n    id: 1,\n    configuration: {\n      url: 'http://posters-galore.com/',\n      mail: {\n        sender: 'julio@posters-galore.com',\n        transport: {\n          service: 'fakemail',\n          auth: {\n            user: 'fake@mail.com',\n            pass: 'f00b@r'\n          }\n        }\n      },\n      file_type_whiltelist: ['txt', 'doc', 'docx', 'xls', 'xlsx', 'pdf', 'png', 'jpg']\n    }\n  }];\n}\n\nexports.default = default_1;","import JsonGraphqlServer from 'json-graphql-server';\nimport generateData from 'data-generator';\nimport fetchMock from 'fetch-mock';\n\nexport default () => {\n    const data = generateData({ serializeDate: false });\n    const restServer = JsonGraphqlServer({ data });\n    const handler = restServer.getHandler();\n\n    fetchMock.mock('begin:http://localhost:4000', handler);\n    return () => fetchMock.restore();\n};\n","\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar en_1 = __importDefault(require(\"faker/locale/en\"));\n\nexports.weightedArrayElement = function (values, weights) {\n  return en_1.default.random.arrayElement(values.reduce(function (acc, value, index) {\n    return acc.concat(new Array(weights[index]).fill(value));\n  }, []));\n};\n\nexports.weightedBoolean = function (likelyhood) {\n  return en_1.default.random.number(99) < likelyhood;\n};\n\nexports.randomDate = function (minDate, maxDate) {\n  var minTs = minDate instanceof Date ? minDate.getTime() : Date.now() - 5 * 365 * 24 * 60 * 60 * 1000; // 5 years\n\n  var maxTs = maxDate instanceof Date ? maxDate.getTime() : Date.now();\n  var range = maxTs - minTs;\n  var randomRange = en_1.default.random.number({\n    max: range\n  }); // move it more towards today to account for traffic increase\n\n  var ts = Math.sqrt(randomRange / range) * range;\n  return new Date(minTs + ts);\n};\n\nexports.randomFloat = function (min, max) {\n  return parseFloat(en_1.default.random.number({\n    min: min,\n    max: max,\n    precision: 0.01\n  }).toFixed(2));\n};"],"sourceRoot":""}